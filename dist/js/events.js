/**
 * @license AGPLv3
 * SPDX-License-Identifier: AGPLv3
 * SPDX-FileCopyrightText: Copyright (c) 2026 The Guitar Wiring Visualizer Authors
 */
export const Events=Object.freeze({ComponentAdded:"component_added",ComponentRemoved:"component_removed",ComponentMoved:"component_moved",ComponentDrawn:"component_drawn",ComponentRedrawn:"component_redrawn",VoltageChanged:"voltage_changed",WireColorChanged:"wire_color_changed",PotRotated:"pot_rotated",SwitchFlipped:"switch_flipped"});export class EventEmitter{constructor(){this.events={}}on(e,t){return this._validateEvent(e),this._validateListener(t),this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>this.off(e,t)}off(e,t){if(this._validateEvent(e),this._validateListener(t),!this.events[e])return;const n=this.events[e].indexOf(t);-1!==n&&this.events[e].splice(n,1)}_emit(e,...t){this._validateEvent(e),this.events[e]&&this.events[e].forEach(e=>e(...t))}_isValidEvent(e){return"string"==typeof e&&Object.values(Events).includes(e)}_isValidListener(e){return"function"==typeof e}_validateEvent(e){if(!this._isValidEvent(e))throw new Error(`invalid event ${e}`)}_validateListener(e){if(!this._isValidListener(e))throw new Error(`invalid listener ${e}`)}}export class EventDispatcher extends EventEmitter{constructor(){if(EventDispatcher.instance)return EventDispatcher.instance;super(),EventDispatcher.instance=this}dispatch(e,...t){this._emit(e,...t)}}
