/**
 * @license AGPLv3
 * SPDX-License-Identifier: AGPLv3
 * SPDX-FileCopyrightText: Copyright (c) 2026 The Guitar Wiring Visualizer Authors
 */
import{DiagramState}from"./diagram.js";import{Component,Pin}from"./coreComponents.js";import{Events}from"./events.js";class Jack extends Component{constructor(e={}){super(e),this._tipPinListenerOff=null}jackIn(){this.sleevePin.hasVoltage()||this.sleevePin.receiveVoltage({value:-1}),this._unsubscribeToPinEvents(),this._subscribeToPinEvents()}_subscribeToPinEvents(){this._tipPinListenerOff=this.tipPin.on(Events.VoltageChanged,e=>{})}_unsubscribeToPinEvents(){"function"==typeof this._tipPinListenerOff&&this._tipPinListenerOff()}}export class MonoJack extends Jack{constructor(e={}){super(e)}static get ImageURL(){return"/img/jack-mono.svg"}get tipPin(){return DiagramState.instance.getComponent(this.pinIds.at(0))}get sleevePin(){return DiagramState.instance.getComponent(this.pinIds.at(1))}_createChildComponents(){const e=new Pin({label:`${this.fullName} tip`}),t=new Pin({label:`${this.fullName} sleeve`});this.pinIds.push(e.id,t.id)}async _drawChildNodes(e){this.tipPin.moveTo({x:47,y:10}),this.tipPin.draw(e),this.sleevePin.moveTo({x:48,y:31}),this.sleevePin.draw(e),Konva.Image.fromURL(MonoJack.ImageURL,t=>(this._applyGlobalStyling(t),e.add(t),this._getPinNodes(e).forEach(e=>e.zIndex(t.zIndex())),Promise.resolve()))}}
